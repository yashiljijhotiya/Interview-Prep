package practice;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import java.io.IOException;
import java.io.StringReader;

public class XMLParser {
    public static void main(String[] args) throws ParserConfigurationException, IOException, SAXException {
//        String xml = "<employees>\n" +
//                "    <employee id=\"111\">\n" +
//                "        <firstName>Lokesh</firstName>\n" +
//                "        <lastName>Gupta</lastName>\n" +
//                "        <location>India</location>\n" +
//                "    </employee>\n" +
//                "    <employee id=\"222\">\n" +
//                "        <firstName>Alex</firstName>\n" +
//                "        <lastName>Gussin</lastName>\n" +
//                "        <location>Russia</location>\n" +
//                "    </employee>\n" +
//                "    <employee id=\"333\">\n" +
//                "        <firstName>David</firstName>\n" +
//                "        <lastName>Feezor</lastName>\n" +
//                "        <location>USA</location>\n" +
//                "    </employee>\n" +
//                "</employees>";

       String xml = "<INProfileResponse><Header><SystemCode>0</SystemCode><MessageText></MessageText><ReportDate>20211129</ReportDate><ReportTime>104859</ReportTime></Header><UserMessage><UserMessageText>Normal Response</UserMessageText></UserMessage><CreditProfileHeader><Enquiry_Username>ecv_ondemand__finbit_ondemand_em</Enquiry_Username><ReportDate>20211129</ReportDate><ReportTime>104859</ReportTime><Version>V2.4</Version><ReportNumber>1638163139252</ReportNumber><Subscriber></Subscriber><Subscriber_Name>Bureau Disclosure Report with Credit Caps</Subscriber_Name></CreditProfileHeader><Current_Application><Current_Application_Details><Enquiry_Reason>6</Enquiry_Reason><Finance_Purpose></Finance_Purpose><Amount_Financed>0</Amount_Financed><Duration_Of_Agreement>0</Duration_Of_Agreement><Current_Applicant_Details><Last_Name>thirupathi</Last_Name><First_Name>srinivasan</First_Name><Middle_Name1></Middle_Name1><Middle_Name2></Middle_Name2><Middle_Name3></Middle_Name3><Gender_Code>2</Gender_Code><IncomeTaxPan>BQGPM7388M</IncomeTaxPan><PAN_Issue_Date></PAN_Issue_Date><PAN_Expiration_Date></PAN_Expiration_Date><Passport_number></Passport_number><Passport_Issue_Date></Passport_Issue_Date><Passport_Expiration_Date></Passport_Expiration_Date><Voter_s_Identity_Card></Voter_s_Identity_Card><Voter_ID_Issue_Date></Voter_ID_Issue_Date><Voter_ID_Expiration_Date></Voter_ID_Expiration_Date><Driver_License_Number></Driver_License_Number><Driver_License_Issue_Date></Driver_License_Issue_Date><Driver_License_Expiration_Date></Driver_License_Expiration_Date><Ration_Card_Number></Ration_Card_Number><Ration_Card_Issue_Date></Ration_Card_Issue_Date><Ration_Card_Expiration_Date></Ration_Card_Expiration_Date><Universal_ID_Number></Universal_ID_Number><Universal_ID_Issue_Date></Universal_ID_Issue_Date><Universal_ID_Expiration_Date></Universal_ID_Expiration_Date><Date_Of_Birth_Applicant>19901013</Date_Of_Birth_Applicant><Telephone_Number_Applicant_1st></Telephone_Number_Applicant_1st><Telephone_Extension></Telephone_Extension><Telephone_Type></Telephone_Type><MobilePhoneNumber>8553896458</MobilePhoneNumber><EMailId>srinivasan@finbit.io</EMailId></Current_Applicant_Details><Current_Other_Details><Income>0</Income><Marital_Status></Marital_Status><Employment_Status></Employment_Status><Time_with_Employer></Time_with_Employer><Number_of_Major_Credit_Card_Held></Number_of_Major_Credit_Card_Held></Current_Other_Details><Current_Applicant_Address_Details><FlatNoPlotNoHouseNo>D 673 SRINIVAS APT GANDHI  RD</FlatNoPlotNoHouseNo><BldgNoSocietyName></BldgNoSocietyName><RoadNoNameAreaLocality></RoadNoNameAreaLocality><City>Pune</City><Landmark></Landmark><State>27</State><PINCode>412207</PINCode><Country_Code>IB</Country_Code></Current_Applicant_Address_Details><Current_Applicant_Additional_AddressDetails/></Current_Application_Details></Current_Application><CAIS_Account><CAIS_Summary><Credit_Account><CreditAccountTotal>2</CreditAccountTotal><CreditAccountActive>2</CreditAccountActive><CreditAccountDefault>0</CreditAccountDefault><CreditAccountClosed>0</CreditAccountClosed><CADSuitFiledCurrentBalance>0</CADSuitFiledCurrentBalance></Credit_Account><Total_Outstanding_Balance><Outstanding_Balance_Secured>12000</Outstanding_Balance_Secured><Outstanding_Balance_Secured_Percentage>44</Outstanding_Balance_Secured_Percentage><Outstanding_Balance_UnSecured>15000</Outstanding_Balance_UnSecured><Outstanding_Balance_UnSecured_Percentage>56</Outstanding_Balance_UnSecured_Percentage><Outstanding_Balance_All>27000</Outstanding_Balance_All></Total_Outstanding_Balance></CAIS_Summary><CAIS_Account_DETAILS><Identification_Number>BP03090001</Identification_Number><Subscriber_Name>XXXX</Subscriber_Name><Account_Number>XXXXXXXX2632</Account_Number><Portfolio_Type>R</Portfolio_Type><Account_Type>10</Account_Type><Open_Date>20160116</Open_Date><Credit_Limit_Amount>50000</Credit_Limit_Amount><Highest_Credit_or_Original_Loan_Amount>75000</Highest_Credit_or_Original_Loan_Amount><Terms_Duration></Terms_Duration><Terms_Frequency></Terms_Frequency><Scheduled_Monthly_Payment_Amount></Scheduled_Monthly_Payment_Amount><Account_Status>78</Account_Status><Payment_Rating>2</Payment_Rating><Payment_History_Profile>N</Payment_History_Profile><Special_Comment></Special_Comment><Current_Balance>15000</Current_Balance><Amount_Past_Due>7000</Amount_Past_Due><Original_Charge_Off_Amount></Original_Charge_Off_Amount><Date_Reported>20201228</Date_Reported><Date_of_First_Delinquency></Date_of_First_Delinquency><Date_Closed></Date_Closed><Date_of_Last_Payment></Date_of_Last_Payment><SuitFiledWillfulDefaultWrittenOffStatus></SuitFiledWillfulDefaultWrittenOffStatus><SuitFiled_WilfulDefault></SuitFiled_WilfulDefault><Written_off_Settled_Status></Written_off_Settled_Status><Value_of_Credits_Last_Month></Value_of_Credits_Last_Month><Occupation_Code></Occupation_Code><Settlement_Amount></Settlement_Amount><Value_of_Collateral></Value_of_Collateral><Type_of_Collateral></Type_of_Collateral><Written_Off_Amt_Total></Written_Off_Amt_Total><Written_Off_Amt_Principal></Written_Off_Amt_Principal><Rate_of_Interest></Rate_of_Interest><Repayment_Tenure>0</Repayment_Tenure><Promotional_Rate_Flag></Promotional_Rate_Flag><Income></Income><Income_Indicator></Income_Indicator><Income_Frequency_Indicator></Income_Frequency_Indicator><DefaultStatusDate></DefaultStatusDate><LitigationStatusDate></LitigationStatusDate><WriteOffStatusDate></WriteOffStatusDate><DateOfAddition>20201228</DateOfAddition><CurrencyCode>INR</CurrencyCode><Subscriber_comments></Subscriber_comments><Consumer_comments></Consumer_comments><AccountHoldertypeCode>1</AccountHoldertypeCode><CAIS_Account_History><Year>2020</Year><Month>12</Month><Days_Past_Due>60</Days_Past_Due><Asset_Classification>?</Asset_Classification></CAIS_Account_History><CAIS_Holder_Details><Surname_Non_Normalized>SRINIVASAN</Surname_Non_Normalized><First_Name_Non_Normalized>VENKAT</First_Name_Non_Normalized><Middle_Name_1_Non_Normalized></Middle_Name_1_Non_Normalized><Middle_Name_2_Non_Normalized></Middle_Name_2_Non_Normalized><Middle_Name_3_Non_Normalized></Middle_Name_3_Non_Normalized><Alias></Alias><Gender_Code>1</Gender_Code><Income_TAX_PAN>XXXXXX388M</Income_TAX_PAN><Passport_Number></Passport_Number><Voter_ID_Number></Voter_ID_Number><Date_of_birth>19901013</Date_of_birth></CAIS_Holder_Details><CAIS_Holder_Address_Details><First_Line_Of_Address_non_normalized>D 673</First_Line_Of_Address_non_normalized><Second_Line_Of_Address_non_normalized>SRINIVAS APT</Second_Line_Of_Address_non_normalized><Third_Line_Of_Address_non_normalized>GANDHI  RD</Third_Line_Of_Address_non_normalized><City_non_normalized>KALYANI NAGAR</City_non_normalized><Fifth_Line_Of_Address_non_normalized></Fifth_Line_Of_Address_non_normalized><State_non_normalized>27</State_non_normalized><ZIP_Postal_Code_non_normalized>412207</ZIP_Postal_Code_non_normalized><CountryCode_non_normalized>IB</CountryCode_non_normalized><Address_indicator_non_normalized></Address_indicator_non_normalized><Residence_code_non_normalized></Residence_code_non_normalized></CAIS_Holder_Address_Details><CAIS_Holder_Phone_Details><Telephone_Number>XXXXXX6458</Telephone_Number><Telephone_Type></Telephone_Type><Telephone_Extension></Telephone_Extension><Mobile_Telephone_Number></Mobile_Telephone_Number><FaxNumber></FaxNumber><EMailId>SXXXXXXXXN@FXXXXX.IO</EMailId></CAIS_Holder_Phone_Details><CAIS_Holder_ID_Details><Income_TAX_PAN>XXXXXX388M</Income_TAX_PAN><PAN_Issue_Date></PAN_Issue_Date><PAN_Expiration_Date></PAN_Expiration_Date><Passport_Number></Passport_Number><Passport_Issue_Date></Passport_Issue_Date><Passport_Expiration_Date></Passport_Expiration_Date><Voter_ID_Number></Voter_ID_Number><Voter_ID_Issue_Date></Voter_ID_Issue_Date><Voter_ID_Expiration_Date></Voter_ID_Expiration_Date><Driver_License_Number></Driver_License_Number><Driver_License_Issue_Date></Driver_License_Issue_Date><Driver_License_Expiration_Date></Driver_License_Expiration_Date><Ration_Card_Number></Ration_Card_Number><Ration_Card_Issue_Date></Ration_Card_Issue_Date><Ration_Card_Expiration_Date></Ration_Card_Expiration_Date><Universal_ID_Number></Universal_ID_Number><Universal_ID_Issue_Date></Universal_ID_Issue_Date><Universal_ID_Expiration_Date></Universal_ID_Expiration_Date><EMailId></EMailId></CAIS_Holder_ID_Details></CAIS_Account_DETAILS><CAIS_Account_DETAILS><Identification_Number>BP03090001</Identification_Number><Subscriber_Name>XXXX</Subscriber_Name><Account_Number>XXXXXXXX2629</Account_Number><Portfolio_Type>I</Portfolio_Type><Account_Type>03</Account_Type><Open_Date>20160113</Open_Date><Credit_Limit_Amount></Credit_Limit_Amount><Highest_Credit_or_Original_Loan_Amount>60000</Highest_Credit_or_Original_Loan_Amount><Terms_Duration></Terms_Duration><Terms_Frequency></Terms_Frequency><Scheduled_Monthly_Payment_Amount></Scheduled_Monthly_Payment_Amount><Account_Status>71</Account_Status><Payment_Rating>1</Payment_Rating><Payment_History_Profile>N</Payment_History_Profile><Special_Comment></Special_Comment><Current_Balance>12000</Current_Balance><Amount_Past_Due>4000</Amount_Past_Due><Original_Charge_Off_Amount></Original_Charge_Off_Amount><Date_Reported>20201228</Date_Reported><Date_of_First_Delinquency></Date_of_First_Delinquency><Date_Closed></Date_Closed><Date_of_Last_Payment></Date_of_Last_Payment><SuitFiledWillfulDefaultWrittenOffStatus></SuitFiledWillfulDefaultWrittenOffStatus><SuitFiled_WilfulDefault></SuitFiled_WilfulDefault><Written_off_Settled_Status></Written_off_Settled_Status><Value_of_Credits_Last_Month></Value_of_Credits_Last_Month><Occupation_Code></Occupation_Code><Settlement_Amount></Settlement_Amount><Value_of_Collateral></Value_of_Collateral><Type_of_Collateral></Type_of_Collateral><Written_Off_Amt_Total></Written_Off_Amt_Total><Written_Off_Amt_Principal></Written_Off_Amt_Principal><Rate_of_Interest></Rate_of_Interest><Repayment_Tenure>0</Repayment_Tenure><Promotional_Rate_Flag></Promotional_Rate_Flag><Income></Income><Income_Indicator></Income_Indicator><Income_Frequency_Indicator></Income_Frequency_Indicator><DefaultStatusDate></DefaultStatusDate><LitigationStatusDate></LitigationStatusDate><WriteOffStatusDate></WriteOffStatusDate><DateOfAddition>20201228</DateOfAddition><CurrencyCode>INR</CurrencyCode><Subscriber_comments></Subscriber_comments><Consumer_comments></Consumer_comments><AccountHoldertypeCode>1</AccountHoldertypeCode><CAIS_Account_History><Year>2020</Year><Month>12</Month><Days_Past_Due>30</Days_Past_Due><Asset_Classification>?</Asset_Classification></CAIS_Account_History><CAIS_Holder_Details><Surname_Non_Normalized>SRINIVASAN</Surname_Non_Normalized><First_Name_Non_Normalized>VENKAT</First_Name_Non_Normalized><Middle_Name_1_Non_Normalized></Middle_Name_1_Non_Normalized><Middle_Name_2_Non_Normalized></Middle_Name_2_Non_Normalized><Middle_Name_3_Non_Normalized></Middle_Name_3_Non_Normalized><Alias></Alias><Gender_Code>1</Gender_Code><Income_TAX_PAN>XXXXXX388M</Income_TAX_PAN><Passport_Number></Passport_Number><Voter_ID_Number></Voter_ID_Number><Date_of_birth>19901013</Date_of_birth></CAIS_Holder_Details><CAIS_Holder_Address_Details><First_Line_Of_Address_non_normalized>D 673</First_Line_Of_Address_non_normalized><Second_Line_Of_Address_non_normalized>SRINIVAS APT</Second_Line_Of_Address_non_normalized><Third_Line_Of_Address_non_normalized>GANDHI  RD</Third_Line_Of_Address_non_normalized><City_non_normalized>KALYANI NAGAR</City_non_normalized><Fifth_Line_Of_Address_non_normalized></Fifth_Line_Of_Address_non_normalized><State_non_normalized>27</State_non_normalized><ZIP_Postal_Code_non_normalized>412207</ZIP_Postal_Code_non_normalized><CountryCode_non_normalized>IB</CountryCode_non_normalized><Address_indicator_non_normalized></Address_indicator_non_normalized><Residence_code_non_normalized></Residence_code_non_normalized></CAIS_Holder_Address_Details><CAIS_Holder_Phone_Details><Telephone_Number>XXXXXX6458</Telephone_Number><Telephone_Type></Telephone_Type><Telephone_Extension></Telephone_Extension><Mobile_Telephone_Number></Mobile_Telephone_Number><FaxNumber></FaxNumber><EMailId>SXXXXXXXXN@FXXXXX.IO</EMailId></CAIS_Holder_Phone_Details><CAIS_Holder_ID_Details><Income_TAX_PAN>XXXXXX388M</Income_TAX_PAN><PAN_Issue_Date></PAN_Issue_Date><PAN_Expiration_Date></PAN_Expiration_Date><Passport_Number></Passport_Number><Passport_Issue_Date></Passport_Issue_Date><Passport_Expiration_Date></Passport_Expiration_Date><Voter_ID_Number></Voter_ID_Number><Voter_ID_Issue_Date></Voter_ID_Issue_Date><Voter_ID_Expiration_Date></Voter_ID_Expiration_Date><Driver_License_Number></Driver_License_Number><Driver_License_Issue_Date></Driver_License_Issue_Date><Driver_License_Expiration_Date></Driver_License_Expiration_Date><Ration_Card_Number></Ration_Card_Number><Ration_Card_Issue_Date></Ration_Card_Issue_Date><Ration_Card_Expiration_Date></Ration_Card_Expiration_Date><Universal_ID_Number></Universal_ID_Number><Universal_ID_Issue_Date></Universal_ID_Issue_Date><Universal_ID_Expiration_Date></Universal_ID_Expiration_Date><EMailId></EMailId></CAIS_Holder_ID_Details></CAIS_Account_DETAILS></CAIS_Account><Match_result><Exact_match>Y</Exact_match></Match_result><TotalCAPS_Summary><TotalCAPSLast7Days>0</TotalCAPSLast7Days><TotalCAPSLast30Days>0</TotalCAPSLast30Days><TotalCAPSLast90Days>0</TotalCAPSLast90Days><TotalCAPSLast180Days>0</TotalCAPSLast180Days></TotalCAPS_Summary><CAPS><CAPS_Summary><CAPSLast7Days>0</CAPSLast7Days><CAPSLast30Days>0</CAPSLast30Days><CAPSLast90Days>0</CAPSLast90Days><CAPSLast180Days>0</CAPSLast180Days></CAPS_Summary></CAPS><NonCreditCAPS><NonCreditCAPS_Summary><NonCreditCAPSLast7Days>0</NonCreditCAPSLast7Days><NonCreditCAPSLast30Days>0</NonCreditCAPSLast30Days><NonCreditCAPSLast90Days>0</NonCreditCAPSLast90Days><NonCreditCAPSLast180Days>0</NonCreditCAPSLast180Days></NonCreditCAPS_Summary></NonCreditCAPS><SCORE><BureauScore>813</BureauScore><BureauScoreConfidLevel>H</BureauScoreConfidLevel></SCORE></INProfileResponse>";


        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();

        Document document = builder.parse(new InputSource(new StringReader(xml)));

        document.getDocumentElement().normalize();

        Element root = document.getDocumentElement();
        System.out.println(root.getNodeName());

        NodeList nList = document.getElementsByTagName("SCORE");
        System.out.println("======================================"+nList.getLength());

        for(int i = 0; i < nList.getLength(); i++){
            Node node = nList.item(i);
            Element element = (Element) node;
           // System.out.println("Employee id -- "+ element.getAttribute("BureauScore"));
            //System.out.println("firstName -- "+element.getAttribute("firstName"));
            System.out.println("date closed -- "+ element.getElementsByTagName("BureauScore").item(0).getTextContent());
           // System.out.println("date reported -- "+element.getElementsByTagName("Date_Reported").item(0).getTextContent());
        }

    }
}
